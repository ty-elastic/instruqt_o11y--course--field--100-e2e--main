{"id": "search_k8s_pod_metrics", "type": "esql", "description": "Look at relevant k8s pod metrics", "tags": ["rca"], "configuration": {"query": "FROM metrics-* \n| WHERE @timestamp >= ?search_start AND @timestamp <= ?search_end\n| WHERE k8s.namespace.name == ?k8s_namespace OR k8s.namespace.name IS NULL\n| WHERE metrics.k8s.pod.cpu.node.utilization IS NOT NULL AND metrics.k8s.pod.memory.node.utilization IS NOT NULL\n| STATS pod_cpu = AVG(metrics.k8s.pod.cpu.node.utilization) * 100, \npod_mem = AVG(metrics.k8s.pod.memory.node.utilization) * 100\nBY k8s.pod.name, BUCKET(@timestamp, 10m)\n| KEEP pod_cpu, pod_mem, k8s.pod.name, `BUCKET(@timestamp, 10m)`", "params": {"search_start": {"type": "date", "description": "start of time window", "optional": false}, "search_end": {"type": "date", "description": "end of time window", "optional": false}, "k8s_namespace": {"type": "string", "description": "kubernetes namespace", "optional": true}}}, "readonly": false}